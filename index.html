<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Space Architects - NASA Habitat Layout Creator</title>
    
    <!-- Main CSS Files -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/editor.css">
    
    <!-- Preload critical assets for better performance -->
    <link rel="preload" href="assets/images/nasa-logo.png" as="image">
</head>
<body>
    <!-- WELCOME PAGE - Modern Blueprint Design -->
    <div id="welcome-page" class="page active">
        <!-- Animated Background -->
        <div class="space-background">
            <div class="stars-layer"></div>
            <div class="nebula-overlay"></div>
            <div class="grid-overlay"></div>
        </div>
        
        <!-- Main Content -->
        <div class="welcome-container">
            <!-- NASA Header with Animation -->
            <header class="nasa-header-modern">
                <div class="logo-container">
                    <img src="assets/images/nasa-logo.png" alt="NASA Logo" class="nasa-logo-modern">
                    <div class="logo-glow"></div>
                </div>
                
                <!-- Main Title with Animations -->
                <div class="title-section">
                    <h1 class="main-title-modern">
                        <span class="title-line-1">Space Architects</span>
                        <span class="title-separator">‚Äî</span>
                        <span class="title-line-2">Habitat Layout Creator</span>
                    </h1>
                    <div class="title-underline"></div>
                </div>
                
                <p class="mission-subtitle-modern">Design the Future of Space Living</p>
            </header>
            
            <!-- Primary CTA Section -->
            <div class="cta-section">
                <button class="btn-primary-modern" id="start-mission-btn">
                    <span class="btn-icon">üöÄ</span>
                    <span class="btn-text">Start Mission Planning</span>
                    <span class="btn-arrow">‚Üí</span>
                    <div class="btn-glow-effect"></div>
                </button>
                
                <!-- Brief Description -->
                <p class="mission-description">
                    Design safe, efficient living spaces for astronauts on lunar and Mars missions.<br>
                    Built on real <strong>NASA standards</strong> and requirements for space habitation.
                </p>
            </div>
            
            <!-- Compact Feature Cards with Hover Effects -->
            <div class="features-compact">
                <div class="feature-card-compact" data-feature="design">
                    <div class="feature-icon">
                        <svg class="icon-svg" viewBox="0 0 24 24">
                            <path d="M12 2L2 7V17L12 22L22 17V7L12 2Z" stroke="currentColor" stroke-width="1.5" fill="none"/>
                            <path d="M2 7L12 12L22 7" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M12 12V22" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                    </div>
                    <div class="feature-info">
                        <h3>Drag & Drop Design</h3>
                        <p>Intuitive room placement with real-time NASA compliance validation</p>
                    </div>
                </div>
                
                <div class="feature-card-compact" data-feature="standards">
                    <div class="feature-icon">
                        <svg class="icon-svg" viewBox="0 0 24 24">
                            <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="1.5" fill="none"/>
                            <path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                    </div>
                    <div class="feature-info">
                        <h3>NASA Standards</h3>
                        <p>Built-in checking for safety requirements and space efficiency</p>
                    </div>
                </div>
                
                <div class="feature-card-compact" data-feature="mission">
                    <div class="feature-icon">
                        <svg class="icon-svg" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5" fill="none"/>
                            <path d="M12 2A10 10 0 0 0 12 22" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M2 12H22" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                    </div>
                    <div class="feature-info">
                        <h3>Mission Ready</h3>
                        <p>Optimized for Luna and Mars environments with realistic constraints</p>
                    </div>
                </div>
                
                <div class="feature-card-compact" data-feature="education">
                    <div class="feature-icon">
                        <svg class="icon-svg" viewBox="0 0 24 24">
                            <path d="M2 3H6.5L9 5.5L15 5.5L17.5 3H22V21H2V3Z" stroke="currentColor" stroke-width="1.5" fill="none"/>
                            <path d="M9 12H15" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M9 16H13" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                    </div>
                    <div class="feature-info">
                        <h3>Educational</h3>
                        <p>Learn about space architecture through interactive design</p>
                    </div>
                </div>
            </div>
            
            <!-- Technical Stats Footer -->
            <div class="tech-stats">
                <div class="stat-item">
                    <span class="stat-number">25+</span>
                    <span class="stat-label">m¬≥ per astronaut</span>
                </div>
                <div class="stat-separator">|</div>
                <div class="stat-item">
                    <span class="stat-number">8</span>
                    <span class="stat-label">essential areas</span>
                </div>
                <div class="stat-separator">|</div>
                <div class="stat-item">
                    <span class="stat-number">NASA</span>
                    <span class="stat-label">compliant</span>
                </div>
            </div>
        </div>
    </div>

    <!-- CONFIG PAGE -->
    <div id="config-page" class="page">
        <header class="nasa-header">
            <div class="nasa-logo-container">
                <img src="assets/images/nasa-logo.png" alt="NASA Logo" class="nasa-logo">
                <span class="nasa-text">NASA</span>
            </div>
            <h1>Mission Configuration</h1>
        </header>

        <main class="config-content">
            <div class="config-form">
                <h2>Define Your Mission Parameters</h2>
                <p>Configure the mission settings that will determine your habitat requirements</p>

                <!-- Mission Type Selection -->
                <div class="form-group">
                    <label for="mission-type">Mission Destination</label>
                    <select id="mission-type" class="form-control">
                        <option value="luna">Luna (Moon) - 1/6 Earth gravity</option>
                        <option value="mars">Mars - 3/8 Earth gravity</option>
                    </select>
                    <div class="field-info">
                        <span class="info-icon">‚ÑπÔ∏è</span>
                        <span>Different destinations have unique environmental challenges</span>
                    </div>
                </div>

                <!-- Crew Size Selection -->
                <div class="form-group">
                    <label for="crew-size">Crew Size</label>
                    <div class="slider-container">
                        <input type="range" id="crew-size" class="form-range" min="2" max="6" value="4">
                        <div class="slider-labels">
                            <span>2</span><span>3</span><span>4</span><span>5</span><span>6</span>
                        </div>
                    </div>
                    <div class="slider-value">
                        <span id="crew-size-display">4</span> astronauts
                    </div>
                </div>

                <!-- Mission Duration Selection -->
                <div class="form-group">
                    <label>Mission Duration</label>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="duration" value="7">
                            <span class="radio-custom"></span>
                            <span>7 days - Short Stay</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="duration" value="30">
                            <span class="radio-custom"></span>
                            <span>30 days - Extended Stay</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="duration" value="60" checked>
                            <span class="radio-custom"></span>
                            <span>60 days - Long Duration</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="duration" value="90">
                            <span class="radio-custom"></span>
                            <span>90 days - Extended Mission</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="duration" value="180">
                            <span class="radio-custom"></span>
                            <span>180 days - Permanent Base</span>
                        </label>
                    </div>
                </div>

                <!-- Generated module info display -->
                <div class="module-preview">
                    <h3>Generated Habitat Module</h3>
                    <div class="module-specs">
                        <div class="spec-item">
                            <strong>Dimensions:</strong> 
                            <span id="module-dimensions">10.3m √ó 6.9m √ó 2.5m</span>
                        </div>
                        <div class="spec-item">
                            <strong>Total Volume:</strong> 
                            <span id="module-volume">177.7 m¬≥</span>
                        </div>
                        <div class="spec-item">
                            <strong>Habitable Volume:</strong> 
                            <span id="habitable-volume">124.4 m¬≥</span>
                        </div>
                        <div class="spec-item">
                            <strong>Volume per Person:</strong> 
                            <span id="volume-per-person">31.1 m¬≥</span>
                        </div>
                    </div>
                </div>

                <!-- Action buttons -->
                <div class="form-actions">
                    <button class="btn btn--secondary" id="back-to-welcome">
                        ‚Üê Back to Welcome
                    </button>
                    <button class="btn btn--primary btn--lg" id="generate-habitat-btn">
                        Generate Habitat Module ‚Üí
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- EDITOR PAGE -->
    <div id="editor-page" class="page">
        <header class="editor-header">
            <div class="nasa-logo-container">
                <img src="assets/images/nasa-logo.png" alt="NASA Logo" class="nasa-logo">
            </div>
            <div class="mission-info">
                <h1>Habitat Layout Designer</h1>
                <div class="mission-params">
                    <span class="param">Mission: <span id="current-mission">Luna</span></span>
                    <span class="param">Crew: <span id="current-crew">4</span></span>
                    <span class="param">Duration: <span id="current-duration">60</span> days</span>
                </div>
            </div>
            <div class="header-actions">
                <button class="btn btn--secondary" id="reconfigure-btn">‚öôÔ∏è Reconfigure</button>
                <button class="btn btn--success" id="submit-design-btn">‚úÖ Submit Design</button>
            </div>
        </header>

        <div class="editor-layout">
            <!-- Requirements Panel -->
            <aside class="requirements-panel">
                <h2>NASA Standards Validation</h2>
                <div class="requirements-list">
                    <div class="requirement-item" id="req-volume">
                        <div class="req-status red"></div>
                        <div class="req-content">
                            <h4>Minimum Volume per Person</h4>
                            <p class="req-value">0 / 25 m¬≥</p>
                            <p class="req-description">Each astronaut needs 25+ m¬≥ of habitable space</p>
                        </div>
                    </div>

                    <div class="requirement-item" id="req-quarters">
                        <div class="req-status red"></div>
                        <div class="req-content">
                            <h4>Individual Sleeping Quarters</h4>
                            <p class="req-value">0 / 4 quarters</p>
                            <p class="req-description">Private sleeping space for each crew member</p>
                        </div>
                    </div>

                    <div class="requirement-item" id="req-essential">
                        <div class="req-status red"></div>
                        <div class="req-content">
                            <h4>Essential Areas Complete</h4>
                            <p class="req-value">0 / 8 areas</p>
                            <p class="req-description">All critical habitat functions present</p>
                        </div>
                    </div>

                    <div class="requirement-item" id="req-hygiene">
                        <div class="req-status red"></div>
                        <div class="req-content">
                            <h4>Hygiene Facilities</h4>
                            <p class="req-value">0 / 2 stations</p>
                            <p class="req-description">Adequate bathroom facilities (max 3 people/station)</p>
                        </div>
                    </div>

                    <div class="requirement-item" id="req-access">
                        <div class="req-status red"></div>
                        <div class="req-content">
                            <h4>Emergency Access</h4>
                            <p class="req-value">N/A</p>
                            <p class="req-description">Quick access to medical bay from all areas</p>
                        </div>
                    </div>
                </div>

                <!-- Overall compliance score -->
                <div class="compliance-score">
                    <h3>Overall Compliance</h3>
                    <div class="score-display">
                        <span class="score-number" id="compliance-percentage">0</span>
                        <span class="score-unit">%</span>
                    </div>
                    <div class="score-bar">
                        <div class="score-progress" id="score-progress"></div>
                    </div>
                </div>
            </aside>

            <!-- Design Canvas -->
            <main class="design-canvas">
                <div class="canvas-header">
                    <h2>Design Canvas</h2>
                    <div class="canvas-controls">
                        <button class="btn btn--small" id="clear-all-btn">üóëÔ∏è Clear All</button>
                        <button class="btn btn--small" id="auto-arrange-btn">‚ú® Auto Arrange</button>
                        <label class="toggle-switch">
                            <input type="checkbox" id="show-grid">
                            <span class="toggle-slider"></span>
                            Show Grid
                        </label>
                    </div>
                </div>

                <div class="habitat-canvas" id="habitat-canvas">
                    <div class="canvas-background"></div>
                    <div class="module-outline" id="module-outline">
                        <div class="module-label">Habitat Module</div>
                    </div>
                    <div class="placed-rooms" id="placed-rooms"></div>
                    <div class="drop-zones" id="drop-zones"></div>
                </div>

                <div class="canvas-info">
                    <div class="info-item">
                        <strong>Module Size:</strong> <span id="canvas-dimensions">10.3m √ó 6.9m</span>
                    </div>
                    <div class="info-item">
                        <strong>Scale:</strong> 1 grid = 0.5m
                    </div>
                    <div class="info-item">
                        <strong>Rooms Placed:</strong> <span id="rooms-count">0</span>
                    </div>
                    <div class="info-item">
                        <strong>Space Used:</strong> <span id="space-used">0%</span>
                    </div>
                </div>
            </main>

            <!-- Rooms Panel -->
            <aside class="rooms-panel">
                <h2>Available Rooms</h2>
                <p class="panel-description">Drag rooms to the canvas to build your habitat</p>

                <div class="room-categories">
                    <button class="category-btn active" data-category="all">All Rooms</button>
                    <button class="category-btn" data-category="essential">Essential</button>
                    <button class="category-btn" data-category="optional">Optional</button>
                </div>

                <div class="rooms-catalog" id="rooms-catalog">
                    <div class="room-section">
                        <h3>Essential Rooms</h3>
                        
                        <div class="room-item draggable" draggable="true" data-room-type="crew_quarters" data-category="essential">
                            <div class="room-icon">üõèÔ∏è</div>
                            <div class="room-info">
                                <h4>Crew Quarters</h4>
                                <p>2.0m √ó 2.5m</p>
                                <p class="room-volume">10.5 m¬≥</p>
                            </div>
                            <div class="room-color" style="background-color: #4CAF50;"></div>
                        </div>

                        <div class="room-item draggable" draggable="true" data-room-type="hygiene" data-category="essential">
                            <div class="room-icon">üöø</div>
                            <div class="room-info">
                                <h4>Hygiene Station</h4>
                                <p>1.2m √ó 1.2m</p>
                                <p class="room-volume">3.0 m¬≥</p>
                            </div>
                            <div class="room-color" style="background-color: #2196F3;"></div>
                        </div>

                        <div class="room-item draggable" draggable="true" data-room-type="galley" data-category="essential">
                            <div class="room-icon">üç≥</div>
                            <div class="room-info">
                                <h4>Galley</h4>
                                <p>2.0m √ó 1.5m</p>
                                <p class="room-volume">6.3 m¬≥</p>
                            </div>
                            <div class="room-color" style="background-color: #FF9800;"></div>
                        </div>

                        <div class="room-item draggable" draggable="true" data-room-type="wardroom" data-category="essential">
                            <div class="room-icon">üçΩÔ∏è</div>
                            <div class="room-info">
                                <h4>Wardroom</h4>
                                <p>3.0m √ó 2.0m</p>
                                <p class="room-volume">12.6 m¬≥</p>
                            </div>
                            <div class="room-color" style="background-color: #FFC107;"></div>
                        </div>

                        <div class="room-item draggable" draggable="true" data-room-type="exercise" data-category="essential">
                            <div class="room-icon">üèÉ</div>
                            <div class="room-info">
                                <h4>Exercise Area</h4>
                                <p>3.0m √ó 2.0m</p>
                                <p class="room-volume">15.0 m¬≥</p>
                            </div>
                            <div class="room-color" style="background-color: #E91E63;"></div>
                        </div>

                        <div class="room-item draggable" draggable="true" data-room-type="workstation" data-category="essential">
                            <div class="room-icon">üíª</div>
                            <div class="room-info">
                                <h4>Work Station</h4>
                                <p>2.0m √ó 1.5m</p>
                                <p class="room-volume">6.3 m¬≥</p>
                            </div>
                            <div class="room-color" style="background-color: #9C27B0;"></div>
                        </div>

                        <div class="room-item draggable" draggable="true" data-room-type="medical" data-category="essential">
                            <div class="room-icon">üè•</div>
                            <div class="room-info">
                                <h4>Medical Bay</h4>
                                <p>2.0m √ó 1.5m</p>
                                <p class="room-volume">6.3 m¬≥</p>
                            </div>
                            <div class="room-color" style="background-color: #F44336;"></div>
                        </div>

                        <div class="room-item draggable" draggable="true" data-room-type="storage" data-category="essential">
                            <div class="room-icon">üì¶</div>
                            <div class="room-info">
                                <h4>Storage</h4>
                                <p>4.0m √ó 2.0m</p>
                                <p class="room-volume">16.8 m¬≥</p>
                            </div>
                            <div class="room-color" style="background-color: #795548;"></div>
                        </div>
                    </div>

                    <div class="room-section">
                        <h3>Optional Rooms</h3>
                        
                        <div class="room-item draggable" draggable="true" data-room-type="recreation" data-category="optional">
                            <div class="room-icon">üéÆ</div>
                            <div class="room-info">
                                <h4>Recreation</h4>
                                <p>2.5m √ó 2.5m</p>
                                <p class="room-volume">13.1 m¬≥</p>
                            </div>
                            <div class="room-color" style="background-color: #00BCD4;"></div>
                        </div>

                        <div class="room-item draggable" draggable="true" data-room-type="greenhouse" data-category="optional">
                            <div class="room-icon">üå±</div>
                            <div class="room-info">
                                <h4>Greenhouse</h4>
                                <p>3.0m √ó 2.5m</p>
                                <p class="room-volume">15.8 m¬≥</p>
                            </div>
                            <div class="room-color" style="background-color: #8BC34A;"></div>
                        </div>
                    </div>
                </div>
            </aside>
        </div>
    </div>

    <!-- MODAL DIALOGS -->
    <div class="modal" id="tip-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üí° Design Tip</h3>
                <button class="close-btn" id="close-tip">&times;</button>
            </div>
            <div class="modal-body">
                <p id="tip-message"></p>
            </div>
            <div class="modal-footer">
                <button class="btn btn--primary" id="got-it-btn">Got it!</button>
            </div>
        </div>
    </div>

    <div class="modal" id="submission-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üèÜ Design Submission</h3>
                <button class="close-btn" id="close-submission">&times;</button>
            </div>
            <div class="modal-body">
                <div class="final-score">
                    <h4>Final Compliance Score</h4>
                    <div class="score-circle">
                        <span id="final-score">0</span>%
                    </div>
                </div>
                <div class="score-breakdown">
                    <h4>Requirements Analysis</h4>
                    <div id="final-requirements"></div>
                </div>
                <div class="recommendations">
                    <h4>Recommendations for Improvement</h4>
                    <div id="final-recommendations"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn--secondary" id="continue-editing">Continue Editing</button>
                <button class="btn btn--primary" id="export-design">Export Design</button>
            </div>
        </div>
    </div>

    <!-- Include all JavaScript files -->
    <script src="data/nasa_standarts.js"></script>
    <script src="js/rooms.js"></script>
    <script src="js/configuration.js"></script>
    <script src="js/validation.js"></script>
    <script src="js/score.js"></script>
    <script src="js/editor.js"></script>
    
    <!-- Main Application Controller -->
    <script>
    const SpaceArchitects = (function() {
        'use strict';
        
        let currentPage = 'welcome';
        
        function init() {
            console.log('üöÄ Initializing Space Architects Application...');
            
            showPage('welcome');
            setupNavigation();
            
            if (typeof ValidationSystem !== 'undefined') {
                ValidationSystem.initialize();
            }
            
            console.log('‚úÖ Space Architects Application Ready!');
        }
        
        function setupNavigation() {
            const startMissionBtn = document.getElementById('start-mission-btn');
            if (startMissionBtn) {
                startMissionBtn.addEventListener('click', function() {
                    console.log('üéØ Starting mission planning...');
                    showPage('config');
                });
            }
            
            const generateBtn = document.getElementById('generate-habitat-btn');
            if (generateBtn) {
                generateBtn.addEventListener('click', function() {
                    console.log('üèóÔ∏è Generating habitat...');
                    
                    this.disabled = true;
                    this.textContent = 'Generating...';
                    
                    setTimeout(() => {
                        showPage('editor');
                        this.disabled = false;
                        this.textContent = 'Generate Habitat Module ‚Üí';
                    }, 500);
                });
            }
            
            const backToWelcomeBtn = document.getElementById('back-to-welcome');
            if (backToWelcomeBtn) {
                backToWelcomeBtn.addEventListener('click', function() {
                    showPage('welcome');
                });
            }
            
            const reconfigureBtn = document.getElementById('reconfigure-btn');
            if (reconfigureBtn) {
                reconfigureBtn.addEventListener('click', function() {
                    showPage('config');
                });
            }
            
            document.addEventListener('navigateToPage', function(event) {
                showPage(event.detail.page);
            });
        }
        
        function showPage(pageName) {
            console.log('üìÑ Navigating to page:', pageName);
            
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => {
                page.classList.remove('active');
            });
            
            const targetPage = document.getElementById(`${pageName}-page`);
            if (targetPage) {
                targetPage.classList.add('active');
                currentPage = pageName;
                
                initializePage(pageName);
            } else {
                console.error('‚ùå Page not found:', pageName);
            }
        }
        
        function initializePage(pageName) {
            switch(pageName) {
                case 'config':
                    if (typeof MissionConfig !== 'undefined' && MissionConfig.initializeConfigPage) {
                        setTimeout(() => MissionConfig.initializeConfigPage(), 100);
                    }
                    break;
                    
                case 'editor':
                    if (typeof HabitatEditor !== 'undefined' && HabitatEditor.initialize) {
                        setTimeout(() => HabitatEditor.initialize(), 100);
                    }
                    break;
                    
                default:
                    break;
            }
        }
        
        function getCurrentPage() {
            return currentPage;
        }
        
        return {
            init: init,
            showPage: showPage,
            getCurrentPage: getCurrentPage
        };
    })();

    window.SpaceArchitects = SpaceArchitects;
    </script>
    
    <!-- Main application initialization -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ NASA Space Architects - Application Loading...');
            SpaceArchitects.init();
            console.log('‚úÖ Application Ready');
        });
    </script>
</body>
</html>