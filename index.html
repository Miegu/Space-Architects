<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Space Architects - NASA Habitat Layout Creator</title>
    
    <!-- Main CSS Files -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/editor.css">
    
    <!-- Preload critical assets for better performance -->
    <link rel="preload" href="assets/images/nasa-logo.png" as="image">
</head>
<body>
    <!-- WELCOME PAGE - Modern Blueprint Design -->
    <div id="welcome-page" class="page active">
        <!-- Animated Background -->
        <div class="space-background">
            <div class="stars-layer"></div>
            <div class="nebula-overlay"></div>
            <div class="grid-overlay"></div>
        </div>
        
        <!-- Main Content -->
        <div class="welcome-container">
            <!-- NASA Header with Animation -->
            <header class="nasa-header-modern">
                <div class="logo-container">
                    <img src="assets/images/nasa-logo.png" alt="NASA Logo" class="nasa-logo-modern">
                    <div class="logo-glow"></div>
                </div>
                
                <!-- Main Title with Animations -->
                <div class="title-section">
                    <h1 class="main-title-modern">
                        <span class="title-line-1">Space Architects</span>
                        <span class="title-separator">—</span>
                        <span class="title-line-2">Habitat Layout Creator</span>
                    </h1>
                    <div class="title-underline"></div>
                </div>
                
                <p class="mission-subtitle-modern">Design the Future of Space Living</p>
            </header>
            
            <!-- Primary CTA Section -->
            <div class="cta-section">
                <button class="btn-primary-modern" id="start-mission-btn">
                    <span class="btn-icon">🚀</span>
                    <span class="btn-text">Start Mission Planning</span>
                    <span class="btn-arrow">→</span>
                    <div class="btn-glow-effect"></div>
                </button>
                
                <!-- Brief Description -->
                <p class="mission-description">
                    Design safe, efficient living spaces for astronauts on lunar and Mars missions.<br>
                    Built on real <strong>NASA standards</strong> and requirements for space habitation.
                </p>
            </div>
            
            <!-- Compact Feature Cards with Hover Effects -->
            <div class="features-compact">
                <div class="feature-card-compact" data-feature="design">
                    <div class="feature-icon">
                        <svg class="icon-svg" viewBox="0 0 24 24">
                            <path d="M12 2L2 7V17L12 22L22 17V7L12 2Z" stroke="currentColor" stroke-width="1.5" fill="none"/>
                            <path d="M2 7L12 12L22 7" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M12 12V22" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                    </div>
                    <div class="feature-info">
                        <h3>Drag & Drop Design</h3>
                        <p>Intuitive room placement with real-time NASA compliance validation</p>
                    </div>
                </div>
                
                <div class="feature-card-compact" data-feature="standards">
                    <div class="feature-icon">
                        <svg class="icon-svg" viewBox="0 0 24 24">
                            <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="1.5" fill="none"/>
                            <path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                    </div>
                    <div class="feature-info">
                        <h3>NASA Standards</h3>
                        <p>Built-in checking for safety requirements and space efficiency</p>
                    </div>
                </div>
                
                <div class="feature-card-compact" data-feature="mission">
                    <div class="feature-icon">
                        <svg class="icon-svg" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5" fill="none"/>
                            <path d="M12 2A10 10 0 0 0 12 22" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M2 12H22" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                    </div>
                    <div class="feature-info">
                        <h3>Mission Ready</h3>
                        <p>Optimized for Luna and Mars environments with realistic constraints</p>
                    </div>
                </div>
                
                <div class="feature-card-compact" data-feature="education">
                    <div class="feature-icon">
                        <svg class="icon-svg" viewBox="0 0 24 24">
                            <path d="M2 3H6.5L9 5.5L15 5.5L17.5 3H22V21H2V3Z" stroke="currentColor" stroke-width="1.5" fill="none"/>
                            <path d="M9 12H15" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M9 16H13" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                    </div>
                    <div class="feature-info">
                        <h3>Educational</h3>
                        <p>Learn about space architecture through interactive design</p>
                    </div>
                </div>
            </div>
            
            <!-- Technical Stats Footer -->
            <div class="tech-stats">
                <div class="stat-item">
                    <span class="stat-number">25+</span>
                    <span class="stat-label">m³ per astronaut</span>
                </div>
                <div class="stat-separator">|</div>
                <div class="stat-item">
                    <span class="stat-number">8</span>
                    <span class="stat-label">essential areas</span>
                </div>
                <div class="stat-separator">|</div>
                <div class="stat-item">
                    <span class="stat-number">NASA</span>
                    <span class="stat-label">compliant</span>
                </div>
            </div>
        </div>
    </div>
    <!-- CONFIGURATION PAGE - Horizontal Layout -->

   <div id="config-page" class="page">
    <!-- Same animated background as welcome page -->
    <div class="space-background">
        <div class="stars-layer"></div>
        <div class="nebula-overlay"></div>
        <div class="grid-overlay"></div>
    </div>
    
    <!-- Main Content -->
    <div class="config-container">
        <!-- Header -->
        <header class="config-header">
            <div class="logo-container">
                <img src="assets/images/nasa-logo.png" alt="NASA Logo" class="nasa-logo-modern">
                <div class="logo-glow"></div>
            </div>
            
            <div class="title-section">
                <h1 class="config-title">
                    <span class="title-line-1">Mission</span>
                    <span class="title-separator">—</span>
                    <span class="title-line-2">Configuration</span>
                </h1>
                <div class="title-underline"></div>
            </div>
            
            <p class="config-subtitle">Define Your Mission Parameters</p>
        </header>

        <!-- Configuration Form - Horizontal Layout -->
        <div class="config-form-modern">
            <!-- Top Row: Destination and Crew Size -->
            <div class="config-row">
                <!-- Mission Destination -->
                <div class="config-section destination-section">
                    <h3 class="section-title">Mission Destination</h3>
                    <div class="destination-buttons">
                        <button class="destination-btn active" id="btn-luna" data-destination="luna">
                            <div class="destination-icon">🌙</div>
                            <div class="destination-info">
                                <span class="destination-name">Luna</span>
                                <span class="destination-detail">1/6 Earth gravity</span>
                            </div>
                        </button>
                        
                        <button class="destination-btn" id="btn-mars" data-destination="mars">
                            <div class="destination-icon">🔴</div>
                            <div class="destination-info">
                                <span class="destination-name">Mars</span>
                                <span class="destination-detail">3/8 Earth gravity</span>
                            </div>
                        </button>
                    </div>
                </div>

                <!-- Crew Size -->
                <div class="config-section crew-section">
                    <h3 class="section-title">Crew Size</h3>
                    <div class="slider-container-modern">
                        <input type="range" id="crew-size-modern" class="slider-modern" min="2" max="20" value="4">
                        <div class="slider-track"></div>
                        <div class="slider-labels">
                            <span>2</span>
                            <span>20</span>
                        </div>
                        <div class="slider-value-modern">
                            <span id="crew-size-display">4</span>
                            <span class="value-label">astronauts</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mission Duration - Full Width -->
            <div class="config-section duration-section">
                <h3 class="section-title">Mission Duration</h3>
                <div class="duration-buttons-compact">
                    <button class="duration-btn" data-duration="7">
                        <span class="duration-number">7</span>
                        <span class="duration-unit">days</span>
                    </button>
                    <button class="duration-btn" data-duration="30">
                        <span class="duration-number">30</span>
                        <span class="duration-unit">days</span>
                    </button>
                    <button class="duration-btn active" data-duration="60">
                        <span class="duration-number">60</span>
                        <span class="duration-unit">days</span>
                    </button>
                    <button class="duration-btn" data-duration="90">
                        <span class="duration-number">90</span>
                        <span class="duration-unit">days</span>
                    </button>
                    <button class="duration-btn" data-duration="180">
                        <span class="duration-number">180</span>
                        <span class="duration-unit">days</span>
                    </button>
                </div>
            </div>

            <!-- Generated Module Preview -->
            <div class="module-preview-modern">
                <h3 class="module-title">Generated Habitat Module</h3>
                <div class="module-specs-grid">
                    <div class="spec-card">
                        <div class="spec-icon">📐</div>
                        <div class="spec-content">
                            <span class="spec-label">Dimensions</span>
                            <span class="spec-value" id="module-dimensions">9.8m x 6.5m x 2.5m</span>
                        </div>
                    </div>
                    
                    <div class="spec-card">
                        <div class="spec-icon">📊</div>
                        <div class="spec-content">
                            <span class="spec-label">Total Volume</span>
                            <span class="spec-value" id="module-volume">159.3 m³</span>
                        </div>
                    </div>
                    
                    <div class="spec-card">
                        <div class="spec-icon">🏠</div>
                        <div class="spec-content">
                            <span class="spec-label">Habitable Volume</span>
                            <span class="spec-value" id="habitable-volume">111.5 m³</span>
                        </div>
                    </div>
                    
                    <div class="spec-card">
                        <div class="spec-icon">👨‍🚀</div>
                        <div class="spec-content">
                            <span class="spec-label">Volume per Person</span>
                            <span class="spec-value" id="volume-per-person">27.9 m³</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="config-actions">
                <button class="btn-secondary-modern" id="back-to-welcome">
                    <span class="btn-icon">←</span>
                    <span class="btn-text">Back to Welcome</span>
                </button>
                
                <button class="btn-primary-modern" id="generate-habitat-btn">
                    <span class="btn-text">Generate Habitat Module</span>
                    <span class="btn-icon">→</span>
                    <div class="btn-glow-effect"></div>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- HABITAT STRUCTURE PAGE - Module Selection -->
<div id="structure-page" class="page">
    <!-- Same animated background as other pages -->
    <div class="space-background">
        <div class="stars-layer"></div>
        <div class="nebula-overlay"></div>
        <div class="grid-overlay"></div>
    </div>
    
    <!-- Main Content -->
    <div class="structure-container">
        <!-- Header -->
        <header class="structure-header">
            <div class="logo-container">
                <img src="assets/images/nasa-logo.png" alt="NASA Logo" class="nasa-logo-modern">
                <div class="logo-glow"></div>
            </div>
            
            <div class="title-section">
                <h1 class="structure-title">
                    <span class="title-line-1">Habitat</span>
                    <span class="title-separator">—</span>
                    <span class="title-line-2">Structure</span>
                </h1>
                <div class="title-underline"></div>
            </div>
            
            <p class="structure-subtitle">Choose Your Module Architecture</p>
        </header>

        <!-- Module Selection -->
        <div class="structure-form-modern">
            <!-- Module Types -->
            <div class="modules-section">
                <h3 class="section-title">Module Types</h3>
                <div class="modules-grid">
                    <!-- Dome Module -->
                    <div class="module-card" data-module="dome">
                        <div class="module-visual">
                            <div class="module-3d dome-3d">
                                <div class="dome-shape">
                                    <div class="dome-hemisphere"></div>
                                    <div class="dome-base"></div>
                                </div>
                            </div>
                        </div>
                        <div class="module-info">
                            <h4>🏠 Dome</h4>
                            <p class="module-desc">Spherical pressure vessel</p>
                            <div class="module-specs">
                                <span class="spec-item">Optimal pressure distribution</span>
                                <span class="spec-item">85% space efficiency</span>
                            </div>
                        </div>
                        <div class="module-selector">
                            <input type="checkbox" id="dome-select" class="module-checkbox">
                            <label for="dome-select" class="checkbox-label">Select</label>
                        </div>
                    </div>

                    <!-- Torus Module -->
                    <div class="module-card" data-module="torus">
                        <div class="module-visual">
                            <div class="module-3d torus-3d">
                                <div class="torus-shape">
                                    <div class="torus-ring"></div>
                                    <div class="torus-inner"></div>
                                </div>
                            </div>
                        </div>
                        <div class="module-info">
                            <h4>🍩 Torus</h4>
                            <p class="module-desc">Ring-shaped habitat</p>
                            <div class="module-specs">
                                <span class="spec-item">Artificial gravity via rotation</span>
                                <span class="spec-item">70% space efficiency</span>
                            </div>
                        </div>
                        <div class="module-selector">
                            <input type="checkbox" id="torus-select" class="module-checkbox">
                            <label for="torus-select" class="checkbox-label">Select</label>
                        </div>
                    </div>

                    <!-- Cube Module -->
                    <div class="module-card" data-module="cube">
                        <div class="module-visual">
                            <div class="module-3d cube-3d">
                                <div class="cube-shape">
                                    <div class="cube-face front"></div>
                                    <div class="cube-face back"></div>
                                    <div class="cube-face right"></div>
                                    <div class="cube-face left"></div>
                                    <div class="cube-face top"></div>
                                    <div class="cube-face bottom"></div>
                                </div>
                            </div>
                        </div>
                        <div class="module-info">
                            <h4>📦 Cube</h4>
                            <p class="module-desc">Rectangular habitat</p>
                            <div class="module-specs">
                                <span class="spec-item">Maximum volume efficiency</span>
                                <span class="spec-item">95% space efficiency</span>
                            </div>
                        </div>
                        <div class="module-selector">
                            <input type="checkbox" id="cube-select" class="module-checkbox">
                            <label for="cube-select" class="checkbox-label">Select</label>
                        </div>
                    </div>

                    <!-- Cylinder Module -->
                    <div class="module-card" data-module="cylinder">
                        <div class="module-visual">
                            <div class="module-3d cylinder-3d">
                                <div class="cylinder-shape">
                                    <div class="cylinder-body"></div>
                                    <div class="cylinder-nose"></div>
                                    <div class="cylinder-end"></div>
                                </div>
                            </div>
                        </div>
                        <div class="module-info">
                            <h4>🚀 Cylinder</h4>
                            <p class="module-desc">Elongated comet design</p>
                            <div class="module-specs">
                                <span class="spec-item">Aerodynamic transport</span>
                                <span class="spec-item">80% space efficiency</span>
                            </div>
                        </div>
                        <div class="module-selector">
                            <input type="checkbox" id="cylinder-select" class="module-checkbox">
                            <label for="cylinder-select" class="checkbox-label">Select</label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Selected Modules Configuration -->
            <div class="selected-modules-section" id="selected-modules-section" style="display: none;">
                <h3 class="section-title">Configure Selected Modules</h3>
                <div id="selected-modules-list">
                    <!-- Dynamic content will be inserted here -->
                </div>
            </div>

            <!-- Module Information Panel -->
            <div class="module-info-panel" id="module-info-panel" style="display: none;">
                <h3 class="section-title">Module Details</h3>
                <div class="info-content" id="info-content">
                    <!-- Dynamic content will be inserted here -->
                </div>
            </div>

            <!-- Total Module Stats -->
            <div class="total-stats-section" id="total-stats-section" style="display: none;">
                <h3 class="section-title">Combined Habitat Statistics</h3>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">📐</div>
                        <div class="stat-content">
                            <span class="stat-label">Total Floor Area</span>
                            <span class="stat-value" id="total-area">0 m²</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">📊</div>
                        <div class="stat-content">
                            <span class="stat-label">Total Volume</span>
                            <span class="stat-value" id="total-volume">0 m³</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">👨‍🚀</div>
                        <div class="stat-content">
                            <span class="stat-label">Crew Capacity</span>
                            <span class="stat-value" id="crew-capacity">0 astronauts</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">⚡</div>
                        <div class="stat-content">
                            <span class="stat-label">Efficiency Rating</span>
                            <span class="stat-value" id="efficiency-rating">0%</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="structure-actions">
                <button class="btn-secondary-modern" id="back-to-config">
                    <span class="btn-icon">←</span>
                    <span class="btn-text">Back to Configuration</span>
                </button>
                
                <button class="btn-primary-modern" id="continue-to-designer" disabled>
                    <span class="btn-text">Continue to Designer</span>
                    <span class="btn-icon">→</span>
                    <div class="btn-glow-effect"></div>
                </button>
            </div>
        </div>
    </div>
</div>

    <!-- EDITOR PAGE -->
    <div id="editor-page" class="page">
        <header class="editor-header">
            <div class="nasa-logo-container">
                <img src="assets/images/nasa-logo.png" alt="NASA Logo" class="nasa-logo">
            </div>
            <div class="mission-info">
                <h1>Habitat Layout Designer</h1>
                <div class="mission-params">
                    <span class="param">Mission: <span id="current-mission">Luna</span></span>
                    <span class="param">Crew: <span id="current-crew">4</span></span>
                    <span class="param">Duration: <span id="current-duration">60</span> days</span>
                </div>
            </div>
            <div class="header-actions">
                <button class="btn btn--secondary" id="reconfigure-btn">⚙️ Reconfigure</button>
                <button class="btn btn--success" id="submit-design-btn">✅ Submit Design</button>
            </div>
        </header>

        <div class="editor-layout">
            <!-- Requirements Panel -->
            <aside class="requirements-panel">
                <h2>NASA Standards Validation</h2>
                <div class="requirements-list">
                    <div class="requirement-item" id="req-volume">
                        <div class="req-status red"></div>
                        <div class="req-content">
                            <h4>Minimum Volume per Person</h4>
                            <p class="req-value">0 / 25 m³</p>
                            <p class="req-description">Each astronaut needs 25+ m³ of habitable space</p>
                        </div>
                    </div>

                    <div class="requirement-item" id="req-quarters">
                        <div class="req-status red"></div>
                        <div class="req-content">
                            <h4>Individual Sleeping Quarters</h4>
                            <p class="req-value">0 / 4 quarters</p>
                            <p class="req-description">Private sleeping space for each crew member</p>
                        </div>
                    </div>

                    <div class="requirement-item" id="req-essential">
                        <div class="req-status red"></div>
                        <div class="req-content">
                            <h4>Essential Areas Complete</h4>
                            <p class="req-value">0 / 8 areas</p>
                            <p class="req-description">All critical habitat functions present</p>
                        </div>
                    </div>

                    <div class="requirement-item" id="req-hygiene">
                        <div class="req-status red"></div>
                        <div class="req-content">
                            <h4>Hygiene Facilities</h4>
                            <p class="req-value">0 / 2 stations</p>
                            <p class="req-description">Adequate bathroom facilities (max 3 people/station)</p>
                        </div>
                    </div>

                    <div class="requirement-item" id="req-access">
                        <div class="req-status red"></div>
                        <div class="req-content">
                            <h4>Emergency Access</h4>
                            <p class="req-value">N/A</p>
                            <p class="req-description">Quick access to medical bay from all areas</p>
                        </div>
                    </div>
                </div>

                <!-- Overall compliance score -->
                <div class="compliance-score">
                    <h3>Overall Compliance</h3>
                    <div class="score-display">
                        <span class="score-number" id="compliance-percentage">0</span>
                        <span class="score-unit">%</span>
                    </div>
                    <div class="score-bar">
                        <div class="score-progress" id="score-progress"></div>
                    </div>
                </div>
            </aside>

            <!-- Design Canvas -->
            <main class="design-canvas">
                <div class="canvas-header">
                    <h2>Design Canvas</h2>
                    <div class="canvas-controls">
                        <button class="btn btn--small" id="clear-all-btn">🗑️ Clear All</button>
                        <button class="btn btn--small" id="auto-arrange-btn">✨ Auto Arrange</button>
                        <label class="toggle-switch">
                            <input type="checkbox" id="show-grid">
                            <span class="toggle-slider"></span>
                            Show Grid
                        </label>
                    </div>
                </div>

                <div class="habitat-canvas" id="habitat-canvas">
                    <div class="canvas-background"></div>
                    <div class="module-outline" id="module-outline">
                        <div class="module-label">Habitat Module</div>
                    </div>
                    <div class="placed-rooms" id="placed-rooms"></div>
                    <div class="drop-zones" id="drop-zones"></div>
                </div>

                <div class="canvas-info">
                    <div class="info-item">
                        <strong>Module Size:</strong> <span id="canvas-dimensions">10.3m x 6.9m</span>
                    </div>
                    <div class="info-item">
                        <strong>Scale:</strong> 1 grid = 0.5m
                    </div>
                    <div class="info-item">
                        <strong>Rooms Placed:</strong> <span id="rooms-count">0</span>
                    </div>
                    <div class="info-item">
                        <strong>Space Used:</strong> <span id="space-used">0%</span>
                    </div>
                </div>
            </main>

            <!-- Rooms Panel -->
            <aside class="rooms-panel">
                <h2>Available Rooms</h2>
                <p class="panel-description">Drag rooms to the canvas to build your habitat</p>

                <div class="room-categories">
                    <button class="category-btn active" data-category="all">All Rooms</button>
                    <button class="category-btn" data-category="essential">Essential</button>
                    <button class="category-btn" data-category="optional">Optional</button>
                </div>

                <div class="rooms-catalog" id="rooms-catalog">
                    <div class="room-section">
                        <h3>Essential Rooms</h3>
                        
                        <div class="room-item draggable" draggable="true" data-room-type="crew_quarters" data-category="essential">
                            <div class="room-icon">🛏️</div>
                            <div class="room-info">
                                <h4>Crew Quarters</h4>
                                <p>2.0m x 2.5m</p>
                                <p class="room-volume">10.5 m³</p>
                            </div>
                            <div class="room-color" style="background-color: #4CAF50;"></div>
                        </div>

                        <div class="room-item draggable" draggable="true" data-room-type="hygiene" data-category="essential">
                            <div class="room-icon">🚿</div>
                            <div class="room-info">
                                <h4>Hygiene Station</h4>
                                <p>1.2m x 1.2m</p>
                                <p class="room-volume">3.0 m³</p>
                            </div>
                            <div class="room-color" style="background-color: #2196F3;"></div>
                        </div>

                        <div class="room-item draggable" draggable="true" data-room-type="galley" data-category="essential">
                            <div class="room-icon">🍳</div>
                            <div class="room-info">
                                <h4>Galley</h4>
                                <p>2.0m x 1.5m</p>
                                <p class="room-volume">6.3 m³</p>
                            </div>
                            <div class="room-color" style="background-color: #FF9800;"></div>
                        </div>

                        <div class="room-item draggable" draggable="true" data-room-type="wardroom" data-category="essential">
                            <div class="room-icon">🍽️</div>
                            <div class="room-info">
                                <h4>Wardroom</h4>
                                <p>3.0m x 2.0m</p>
                                <p class="room-volume">12.6 m³</p>
                            </div>
                            <div class="room-color" style="background-color: #FFC107;"></div>
                        </div>

                        <div class="room-item draggable" draggable="true" data-room-type="exercise" data-category="essential">
                            <div class="room-icon">🏃</div>
                            <div class="room-info">
                                <h4>Exercise Area</h4>
                                <p>3.0m x 2.0m</p>
                                <p class="room-volume">15.0 m³</p>
                            </div>
                            <div class="room-color" style="background-color: #E91E63;"></div>
                        </div>

                        <div class="room-item draggable" draggable="true" data-room-type="workstation" data-category="essential">
                            <div class="room-icon">💻</div>
                            <div class="room-info">
                                <h4>Work Station</h4>
                                <p>2.0m x 1.5m</p>
                                <p class="room-volume">6.3 m³</p>
                            </div>
                            <div class="room-color" style="background-color: #9C27B0;"></div>
                        </div>

                        <div class="room-item draggable" draggable="true" data-room-type="medical" data-category="essential">
                            <div class="room-icon">🏥</div>
                            <div class="room-info">
                                <h4>Medical Bay</h4>
                                <p>2.0m x 1.5m</p>
                                <p class="room-volume">6.3 m³</p>
                            </div>
                            <div class="room-color" style="background-color: #F44336;"></div>
                        </div>

                        <div class="room-item draggable" draggable="true" data-room-type="storage" data-category="essential">
                            <div class="room-icon">📦</div>
                            <div class="room-info">
                                <h4>Storage</h4>
                                <p>4.0m x 2.0m</p>
                                <p class="room-volume">16.8 m³</p>
                            </div>
                            <div class="room-color" style="background-color: #795548;"></div>
                        </div>
                    </div>

                    <div class="room-section">
                        <h3>Optional Rooms</h3>
                        
                        <div class="room-item draggable" draggable="true" data-room-type="recreation" data-category="optional">
                            <div class="room-icon">🎮</div>
                            <div class="room-info">
                                <h4>Recreation</h4>
                                <p>2.5m x 2.5m</p>
                                <p class="room-volume">13.1 m³</p>
                            </div>
                            <div class="room-color" style="background-color: #00BCD4;"></div>
                        </div>

                        <div class="room-item draggable" draggable="true" data-room-type="greenhouse" data-category="optional">
                            <div class="room-icon">🌱</div>
                            <div class="room-info">
                                <h4>Greenhouse</h4>
                                <p>3.0m x 2.5m</p>
                                <p class="room-volume">15.8 m³</p>
                            </div>
                            <div class="room-color" style="background-color: #8BC34A;"></div>
                        </div>
                    </div>
                </div>
            </aside>
        </div>
    </div>

    <!-- MODAL DIALOGS -->
    <div class="modal" id="tip-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>💡 Design Tip</h3>
                <button class="close-btn" id="close-tip">&times;</button>
            </div>
            <div class="modal-body">
                <p id="tip-message"></p>
            </div>
            <div class="modal-footer">
                <button class="btn btn--primary" id="got-it-btn">Got it!</button>
            </div>
        </div>
    </div>

    <div class="modal" id="submission-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>🏆 Design Submission</h3>
                <button class="close-btn" id="close-submission">&times;</button>
            </div>
            <div class="modal-body">
                <div class="final-score">
                    <h4>Final Compliance Score</h4>
                    <div class="score-circle">
                        <span id="final-score">0</span>%
                    </div>
                </div>
                <div class="score-breakdown">
                    <h4>Requirements Analysis</h4>
                    <div id="final-requirements"></div>
                </div>
                <div class="recommendations">
                    <h4>Recommendations for Improvement</h4>
                    <div id="final-recommendations"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn--secondary" id="continue-editing">Continue Editing</button>
                <button class="btn btn--primary" id="export-design">Export Design</button>
            </div>
        </div>
    </div>

    <!-- Include all JavaScript files -->
    <script src="data/nasa_standarts.js"></script>
    <script src="js/rooms.js"></script>
    <script src="js/configuration.js"></script>
    <script src="js/validation.js"></script>
    <script src="js/score.js"></script>
    <script src="js/editor.js"></script>
    
    <!-- Main Application Controller -->
    <script>
    const SpaceArchitects = (function() {
        'use strict';
        
        let currentPage = 'welcome';
        
        function init() {
            console.log('🚀 Initializing Space Architects Application...');
            
            showPage('welcome');
            setupNavigation();
            
            if (typeof ValidationSystem !== 'undefined') {
                ValidationSystem.initialize();
            }
            
            console.log('✅ Space Architects Application Ready!');
        }
        
        function setupNavigation() {
            const startMissionBtn = document.getElementById('start-mission-btn');
            if (startMissionBtn) {
                startMissionBtn.addEventListener('click', function() {
                    console.log('🎯 Starting mission planning...');
                    showPage('config');
                });
            }
            
            const generateBtn = document.getElementById('generate-habitat-btn');
            if (generateBtn) {
                generateBtn.addEventListener('click', function() {
                    console.log('🏗️ Generating habitat...');
                    
                    this.disabled = true;
                    this.textContent = 'Generating...';
                    
                    setTimeout(() => {
                        showPage('editor');
                        this.disabled = false;
                        this.textContent = 'Generate Habitat Module →';
                    }, 500);
                });
            }
            
            const backToWelcomeBtn = document.getElementById('back-to-welcome');
            if (backToWelcomeBtn) {
                backToWelcomeBtn.addEventListener('click', function() {
                    showPage('welcome');
                });
            }
            
            const reconfigureBtn = document.getElementById('reconfigure-btn');
            if (reconfigureBtn) {
                reconfigureBtn.addEventListener('click', function() {
                    showPage('config');
                });
            }
            
            document.addEventListener('navigateToPage', function(event) {
                showPage(event.detail.page);
            });
        }
        
        function showPage(pageName) {
            console.log('📄 Navigating to page:', pageName);
            
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => {
                page.classList.remove('active');
            });
            
            const targetPage = document.getElementById(`${pageName}-page`);
            if (targetPage) {
                targetPage.classList.add('active');
                currentPage = pageName;
                
                initializePage(pageName);
            } else {
                console.error('❌ Page not found:', pageName);
            }
        }
        
        function initializePage(pageName) {
            switch(pageName) {
                case 'config':
                    if (typeof MissionConfig !== 'undefined' && MissionConfig.initializeConfigPage) {
                        setTimeout(() => MissionConfig.initializeConfigPage(), 100);
                    }
                    break;
                    
                case 'editor':
                    if (typeof HabitatEditor !== 'undefined' && HabitatEditor.initialize) {
                        setTimeout(() => HabitatEditor.initialize(), 100);
                    }
                    break;
                    
                default:
                    break;
            }
        }
        
        function getCurrentPage() {
            return currentPage;
        }
        
        return {
            init: init,
            showPage: showPage,
            getCurrentPage: getCurrentPage
        };
    })();

    window.SpaceArchitects = SpaceArchitects;
    </script>
    
    <!-- Main application initialization -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 NASA Space Architects - Application Loading...');
            SpaceArchitects.init();
            console.log('✅ Application Ready');
        });
    </script>
    <script>
// Config Page JavaScript - Fix all functionality
document.addEventListener('DOMContentLoaded', function() {
    console.log('🔧 Initializing config page functionality...');
    
    // Crew Size Slider
    const crewSlider = document.getElementById('crew-size-modern');
    const crewDisplay = document.getElementById('crew-size-display');
    
    if (crewSlider && crewDisplay) {
        crewSlider.addEventListener('input', function() {
            crewDisplay.textContent = this.value;
            console.log('👨‍🚀 Crew size updated:', this.value);
            updateModuleSpecs();
        });
    }
    
    // Destination Buttons
    const destinationButtons = document.querySelectorAll('.destination-btn');
    destinationButtons.forEach(btn => {
        btn.addEventListener('click', function() {
            // Remove active from all buttons
            destinationButtons.forEach(b => b.classList.remove('active'));
            
            // Add active to clicked button
            this.classList.add('active');
            
            const destination = this.dataset.destination;
            console.log('🌍 Destination selected:', destination);
            updateModuleSpecs();
        });
    });
    
    // Duration Buttons
    const durationButtons = document.querySelectorAll('.duration-btn');
    durationButtons.forEach(btn => {
        btn.addEventListener('click', function() {
            // Remove active from all buttons
            durationButtons.forEach(b => b.classList.remove('active'));
            
            // Add active to clicked button
            this.classList.add('active');
            
            const duration = this.dataset.duration;
            console.log('⏱️ Duration selected:', duration + ' days');
            updateModuleSpecs();
        });
    });
    
    // Update Module Specifications
    function updateModuleSpecs() {
        const crewSize = parseInt(crewSlider?.value || 4);
        const activeDestination = document.querySelector('.destination-btn.active')?.dataset.destination || 'luna';
        const activeDuration = document.querySelector('.duration-btn.active')?.dataset.duration || '60';
        
        // Calculate basic module dimensions (simplified)
        const baseArea = Math.max(50, crewSize * 12); // minimum 50m², 12m² per person
        const width = Math.round(Math.sqrt(baseArea * 1.6) * 10) / 10; // roughly 1.6:1 ratio
        const length = Math.round((baseArea / width) * 10) / 10;
        const height = 2.5;
        
        const totalVolume = Math.round(width * length * height * 10) / 10;
        const habitableVolume = Math.round(totalVolume * 0.7 * 10) / 10; // 70% habitable
        const volumePerPerson = Math.round((habitableVolume / crewSize) * 10) / 10;
        
        // Update displays
        document.getElementById('module-dimensions').textContent = `${width}m x ${length}m x ${height}m`;
        document.getElementById('module-volume').textContent = `${totalVolume} m³`;
        document.getElementById('habitable-volume').textContent = `${habitableVolume} m³`;
        document.getElementById('volume-per-person').textContent = `${volumePerPerson} m³`;
        
        console.log('📊 Module specs updated:', { crewSize, activeDestination, activeDuration });
    }
    
    // Initialize with current values
    updateModuleSpecs();
    
    console.log('✅ Config page functionality initialized');
});
</script>

<script>
// Structure Page JavaScript - Module Selection Logic
document.addEventListener('DOMContentLoaded', function() {
    console.log('🏗️ Initializing structure page functionality...');
    
    // Module definitions with NASA facts and design tips
    const MODULE_TYPES = {
        dome: {
            name: 'Dome',
            icon: '🏠',
            description: 'Spherical pressure vessel optimized for structural integrity',
            efficiency: 85,
            sizes: {
                small: { diameter: 8, volume: 268, area: 50 },
                medium: { diameter: 12, volume: 905, area: 113 },
                large: { diameter: 16, volume: 2145, area: 201 }
            },
            nasaFacts: [
                'Spherical structures provide optimal pressure distribution with minimal material stress',
                'Dome habitats require 40% less structural material than rectangular designs',
                'The curved walls naturally distribute atmospheric pressure loads evenly'
            ],
            designTips: [
                'Position airlocks at the base for easy access and structural stability',
                'Use the curved walls for efficient air circulation patterns',
                'Consider the center height advantage for multi-level interior design'
            ]
        },
        torus: {
            name: 'Torus',
            icon: '🍩',
            description: 'Ring-shaped habitat enabling artificial gravity through rotation',
            efficiency: 70,
            sizes: {
                small: { diameter: 20, volume: 400, area: 80 },
                medium: { diameter: 30, volume: 900, area: 180 },
                large: { diameter: 40, volume: 1600, area: 320 }
            },
            nasaFacts: [
                'Rotating habitats can generate artificial gravity through centrifugal force',
                'Optimal rotation rate is 2-3 RPM to avoid motion sickness in crew',
                'Ring structures allow for natural day/night cycles with controlled lighting'
            ],
            designTips: [
                'Place heavy equipment on the outer ring for maximum artificial gravity',
                'Design spoke connections for access to the zero-gravity hub',
                'Plan for Coriolis effects when designing fluid systems'
            ]
        },
        cube: {
            name: 'Cube',
            icon: '📦',
            description: 'Rectangular habitat maximizing internal volume efficiency',
            efficiency: 95,
            sizes: {
                small: { width: 8, length: 10, height: 3, volume: 240, area: 80 },
                medium: { width: 12, length: 15, height: 3, volume: 540, area: 180 },
                large: { width: 16, length: 20, height: 4, volume: 1280, area: 320 }
            },
            nasaFacts: [
                'Rectangular modules maximize usable interior space with minimal waste',
                'Flat walls simplify equipment mounting and interior layout design',
                'Modular construction allows for easy expansion and reconfiguration'
            ],
            designTips: [
                'Reinforce corners with structural supports for pressure containment',
                'Use the rectangular grid for efficient room layout planning',
                'Design flat surfaces for easy integration with life support systems'
            ]
        },
        cylinder: {
            name: 'Cylinder',
            icon: '🚀',
            description: 'Elongated comet design optimized for transport and assembly',
            efficiency: 80,
            sizes: {
                small: { length: 15, diameter: 6, volume: 424, area: 71 },
                medium: { length: 20, diameter: 8, volume: 1005, area: 126 },
                large: { length: 25, diameter: 10, volume: 1963, area: 196 }
            },
            nasaFacts: [
                'Cylindrical modules are ideal for rocket transport due to aerodynamic shape',
                'The pointed nose reduces atmospheric drag during planetary entry',
                'Cylindrical pressure vessels are structurally efficient for internal pressure'
            ],
            designTips: [
                'Utilize the length for sequential room layout and workflow efficiency',
                'Position critical systems along the central axis for easy maintenance',
                'Design the tapered end for specialized functions like observation or docking'
            ]
        }
    };
    
    let selectedModules = [];
    let crewRequirement = 4; // From config page
    
    // Initialize module selection handlers
    initializeModuleSelection();
    
    // Navigation handlers
    setupStructureNavigation();
    
    function initializeModuleSelection() {
        const moduleCards = document.querySelectorAll('.module-card');
        const moduleCheckboxes = document.querySelectorAll('.module-checkbox');
        
        // Module card click handlers
        moduleCards.forEach(card => {
            card.addEventListener('click', function(e) {
                if (e.target.type !== 'checkbox') {
                    const checkbox = this.querySelector('.module-checkbox');
                    checkbox.checked = !checkbox.checked;
                    handleModuleSelection(checkbox);
                }
            });
            
            // Show module info on hover
            card.addEventListener('mouseenter', function() {
                const moduleType = this.dataset.module;
                showModuleInfo(moduleType);
            });
        });
        
        // Checkbox change handlers
        moduleCheckboxes.forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                handleModuleSelection(this);
            });
        });
    }
    
    function handleModuleSelection(checkbox) {
        const moduleType = checkbox.id.replace('-select', '');
        const moduleCard = checkbox.closest('.module-card');
        
        if (checkbox.checked) {
            // Add to selected modules
            moduleCard.classList.add('selected');
            if (!selectedModules.find(m => m.type === moduleType)) {
                selectedModules.push({
                    type: moduleType,
                    size: 'medium', // default size
                    config: MODULE_TYPES[moduleType]
                });
            }
        } else {
            // Remove from selected modules
            moduleCard.classList.remove('selected');
            selectedModules = selectedModules.filter(m => m.type !== moduleType);
        }
        
        updateSelectedModulesSection();
        updateTotalStats();
        updateContinueButton();
        
        console.log('🏗️ Selected modules:', selectedModules);
    }
    
    function showModuleInfo(moduleType) {
        const module = MODULE_TYPES[moduleType];
        const infoPanel = document.getElementById('module-info-panel');
        const infoContent = document.getElementById('info-content');
        
        if (!module) return;
        
        infoContent.innerHTML = `
            <div class="nasa-facts">
                <h4>🚀 NASA Facts</h4>
                ${module.nasaFacts.map(fact => `
                    <div class="fact-item">
                        <div class="fact-icon">🔬</div>
                        <div class="fact-text">${fact}</div>
                    </div>
                `).join('')}
            </div>
            
            <div class="design-tips">
                <h4>💡 Design Tips</h4>
                ${module.designTips.map(tip => `
                    <div class="tip-item">
                        <div class="tip-icon">💡</div>
                        <div class="tip-text">${tip}</div>
                    </div>
                `).join('')}
            </div>
        `;
        
        infoPanel.style.display = 'block';
    }
    
    function updateSelectedModulesSection() {
        const section = document.getElementById('selected-modules-section');
        const modulesList = document.getElementById('selected-modules-list');
        
        if (selectedModules.length === 0) {
            section.style.display = 'none';
            return;
        }
        
        section.style.display = 'block';
        
        modulesList.innerHTML = selectedModules.map(module => `
            <div class="module-config-item" data-module="${module.type}">
                <div class="config-module-name">
                    ${module.config.icon} ${module.config.name}
                </div>
                <div class="size-selector">
                    <button class="size-btn ${module.size === 'small' ? 'active' : ''}" data-size="small">Small</button>
                    <button class="size-btn ${module.size === 'medium' ? 'active' : ''}" data-size="medium">Medium</button>
                    <button class="size-btn ${module.size === 'large' ? 'active' : ''}" data-size="large">Large</button>
                </div>
            </div>
        `).join('');
        
        // Add size selection handlers
        modulesList.querySelectorAll('.size-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const moduleType = this.closest('.module-config-item').dataset.module;
                const size = this.dataset.size;
                
                // Update selected module size
                const module = selectedModules.find(m => m.type === moduleType);
                if (module) {
                    module.size = size;
                }
                
                // Update UI
                this.closest('.size-selector').querySelectorAll('.size-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                updateTotalStats();
            });
        });
    }
    
    function updateTotalStats() {
        const statsSection = document.getElementById('total-stats-section');
        
        if (selectedModules.length === 0) {
            statsSection.style.display = 'none';
            return;
        }
        
        statsSection.style.display = 'block';
        
        // Calculate totals
        let totalArea = 0;
        let totalVolume = 0;
        let totalEfficiency = 0;
        
        selectedModules.forEach(module => {
            const sizeData = module.config.sizes[module.size];
            totalArea += sizeData.area;
            totalVolume += sizeData.volume;
            totalEfficiency += module.config.efficiency;
        });
        
        const averageEfficiency = Math.round(totalEfficiency / selectedModules.length);
        const crewCapacity = Math.floor(totalVolume / 25); // 25m³ per person minimum
        
        // Update displays
        document.getElementById('total-area').textContent = `${totalArea} m²`;
        document.getElementById('total-volume').textContent = `${totalVolume} m³`;
        document.getElementById('crew-capacity').textContent = `${crewCapacity} astronauts`;
        document.getElementById('efficiency-rating').textContent = `${averageEfficiency}%`;
    }
    
    function updateContinueButton() {
        const continueBtn = document.getElementById('continue-to-designer');
        
        if (selectedModules.length > 0) {
            continueBtn.disabled = false;
            continueBtn.style.opacity = '1';
        } else {
            continueBtn.disabled = true;
            continueBtn.style.opacity = '0.6';
        }
    }
    
    function setupStructureNavigation() {
        // Back to config button
        const backBtn = document.getElementById('back-to-config');
        if (backBtn) {
            backBtn.addEventListener('click', function() {
                SpaceArchitects.showPage('config');
            });
        }
        
        // Continue to designer button
        const continueBtn = document.getElementById('continue-to-designer');
        if (continueBtn) {
            continueBtn.addEventListener('click', function() {
                if (selectedModules.length > 0) {
                    // Store selected modules for the editor page
                    window.selectedHabitatModules = selectedModules;
                    SpaceArchitects.showPage('editor');
                }
            });
        }
    }
    
    console.log('✅ Structure page functionality initialized');
});
</script>
</body>
</html>